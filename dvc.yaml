stages:

  download:
    cmd: python3 main.py --download-data
    deps:
      - src/protx/data/downloader.py
      - src/protx/config/data_config.py
    outs:
      - output/data/raw/uniref50.fasta.gz

  extract:
    cmd: python3 main.py --extract-data
    deps:
      - src/protx/data/extractor.py
      - output/data/raw/uniref50.fasta.gz
      - src/protx/config/data_config.py
    outs:
      - output/data/raw/uniref50.fasta

  filter_split:
    cmd: python3 main.py --filter-split-data
    deps:
      - src/protx/data/filter_splitor.py
      - output/data/raw/uniref50.fasta
      - src/protx/config/data_config.py

    outs:
      - output/data/filter_split/uniref50_filtered.fasta
      - output/data/filter_split/train.fasta
      - output/data/filter_split/val.fasta
      - output/data/filter_split/dataset_info.txt
  
  # protx_dataset:
  #   cmd: python3 main.py --save-protx-dataset
  #   deps:
  #     - src/protx/data/dataset.py
  #     - output/data/filter_split/train.fasta
  #     - output/data/filter_split/val.fasta
  #   outs:
  #     - output/data/protx_dataset/train.h5
  #     - output/data/protx_dataset/val.h5
  
  